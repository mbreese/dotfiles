#!/usr/bin/env python
import os
import sys


def usage():
    print """\
Usage: overlap_lists {-d} list1.txt list2.txt

Option:
    -d    Show the differences in lists
"""
    sys.exit(1)


def calc_overlap(fname1, fname2, show_diff=False):
    buf = set()
    with open(fname1) as f:
        for line in f:
            val = line.strip()
            if not val:
                continue
            buf.add(val)

    with open(fname2) as f:
        for line in f:
            val = line.strip()
            if not val:
                continue
            if not show_diff and val in buf:
                print val
            elif show_diff and not val in buf:
                print val


if __name__ == '__main__':
    isdiff = False
    fname1=None
    fname2=None

    for arg in sys.argv[1:]:
        if arg == '-h':
            usage()
        elif arg == '-d':
            isdiff = True
        elif os.path.exists(os.path.expanduser(arg)):
            if not fname1:
                fname1 = os.path.expanduser(arg)
            elif not fname2:
                fname2 = os.path.expanduser(arg)
            else:
                usage()

    if not fname1 or not fname2:
        usage()

    calc_overlap(fname1, fname2, isdiff)

